# E2E Aggregation Function Tests
# Validated against Gnumeric

_forge_version: "1.0.0"

assumptions:
  # SUM - Sum of values
  test_sum_basic:
    value: null
    formula: "=SUM(1, 2, 3)"
    expected: 6

  test_sum_single:
    value: null
    formula: "=SUM(42)"
    expected: 42

  test_sum_negative:
    value: null
    formula: "=SUM(10, -5, 3)"
    expected: 8

  test_sum_decimals:
    value: null
    formula: "=SUM(1.5, 2.5, 3.0)"
    expected: 7

  test_sum_zeros:
    value: null
    formula: "=SUM(0, 0, 0)"
    expected: 0

  # AVERAGE - Mean of values
  test_average_basic:
    value: null
    formula: "=AVERAGE(1, 2, 3)"
    expected: 2

  test_average_single:
    value: null
    formula: "=AVERAGE(42)"
    expected: 42

  test_average_decimals:
    value: null
    formula: "=AVERAGE(1, 2, 3, 4)"
    expected: 2.5

  test_average_negative:
    value: null
    formula: "=AVERAGE(-10, 10)"
    expected: 0

  # MIN - Minimum value
  test_min_basic:
    value: null
    formula: "=MIN(5, 3, 8)"
    expected: 3

  test_min_single:
    value: null
    formula: "=MIN(42)"
    expected: 42

  test_min_negative:
    value: null
    formula: "=MIN(-5, 0, 5)"
    expected: -5

  test_min_same:
    value: null
    formula: "=MIN(7, 7, 7)"
    expected: 7

  # MAX - Maximum value
  test_max_basic:
    value: null
    formula: "=MAX(5, 3, 8)"
    expected: 8

  test_max_single:
    value: null
    formula: "=MAX(42)"
    expected: 42

  test_max_negative:
    value: null
    formula: "=MAX(-5, -10, -1)"
    expected: -1

  test_max_same:
    value: null
    formula: "=MAX(7, 7, 7)"
    expected: 7

  # COUNT - Count numeric values
  test_count_basic:
    value: null
    formula: "=COUNT(1, 2, 3)"
    expected: 3

  test_count_single:
    value: null
    formula: "=COUNT(42)"
    expected: 1

  test_count_five:
    value: null
    formula: "=COUNT(1, 2, 3, 4, 5)"
    expected: 5

  # Combined operations
  test_sum_with_round:
    value: null
    formula: "=ROUND(SUM(1.111, 2.222, 3.333), 2)"
    expected: 6.67

  test_average_with_round:
    value: null
    formula: "=ROUND(AVERAGE(1, 2, 3, 4, 5), 1)"
    expected: 3.0

  test_min_max_diff:
    value: null
    formula: "=MAX(1, 5, 9) - MIN(1, 5, 9)"
    expected: 8
